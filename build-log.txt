Running the postCreateCommand from devcontainer.json...

[849116 ms] Start: Run in container: /bin/sh -c .devcontainer/post-create.sh
--- Starting Post-Container-Creation Setup ---
--- Installing eBPF build tools... ---
info: syncing channel updates for 'nightly-x86_64-unknown-linux-gnu'
info: latest update on 2025-06-24, rust version 1.90.0-nightly (706f244db 2025-0
6-23)
info: component 'rust-src' is up to date
warn: Force-skipping unavailable component 'rust-std-bpfel-unknown-none'
    Updating crates.io index
     Ignored package `bpf-linker v0.9.14` is already installed, use --force to o
verride
info: syncing channel updates for 'nightly-x86_64-unknown-linux-gnu'
info: latest update on 2025-06-24, rust version 1.90.0-nightly (706f244db 2025-0
6-23)
info: component 'rust-src' is up to date
warn: Force-skipping unavailable component 'rust-std-bpfel-unknown-none'
    Updating crates.io index
     Ignored package `cargo-generate v0.23.3` is already installed, use --force
to override
--- Building project kernel... ---
Building L.O.C.K. kernel...
Building eBPF program...
info: syncing channel updates for 'nightly-x86_64-unknown-linux-gnu'
info: latest update on 2025-06-24, rust version 1.90.0-nightly (706f244db 2025-0
6-23)
info: component 'rust-src' is up to date
warn: Force-skipping unavailable component 'rust-std-bpfel-unknown-none'
warning: profiles for the non root package will be ignored, specify profiles at
the workspace root:
package:   /workspace/kernel/aya/lock-ebpf/Cargo.toml
workspace: /workspace/kernel/aya/Cargo.toml
    Updating crates.io index
   Compiling proc-macro2 v1.0.95
   Compiling unicode-ident v1.0.18
   Compiling utf8parse v0.2.2
   Compiling anstyle-query v1.1.3
   Compiling colorchoice v1.0.4
   Compiling anstyle v1.0.11
   Compiling is_terminal_polyfill v1.70.1
   Compiling anyhow v1.0.98
   Compiling heck v0.5.0
   Compiling clap_lex v0.7.5
   Compiling strsim v0.11.1
   Compiling anstyle-parse v0.2.7
   Compiling anstream v0.6.19
   Compiling clap_builder v4.5.40
   Compiling quote v1.0.40
   Compiling syn v2.0.104
   Compiling clap_derive v4.5.40
   Compiling clap v4.5.40
   Compiling xtask v0.1.0 (/workspace/kernel/aya/xtask)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 57.86s
     Running `target/x86_64-unknown-linux-gnu/debug/xtask build-ebpf --release`
warning: profiles for the non root package will be ignored, specify profiles at
the workspace root:
package:   /workspace/kernel/aya/lock-ebpf/Cargo.toml
workspace: /workspace/kernel/aya/Cargo.toml
  Downloaded aya-ebpf v0.1.1
  Downloaded num_enum v0.7.3
  Downloaded proc-macro-error-attr v1.0.4
  Downloaded proc-macro-error v1.0.4
  Downloaded num_enum_derive v0.7.3
  Downloaded aya-log-common v0.1.15
  Downloaded aya-ebpf-macros v0.1.1
  Downloaded aya-ebpf-cty v0.2.2
  Downloaded aya-log-parser v0.1.13
  Downloaded aya-log-ebpf-macros v0.1.0
  Downloaded aya-log-ebpf v0.1.1
  Downloaded aya-ebpf-bindings v0.1.1
  Downloaded 12 crates (261.7KiB) in 1.09s
    Updating crates.io index
  Downloaded getopts v0.2.23
  Downloaded miniz_oxide v0.8.9
  Downloaded rustc-literal-escaper v0.0.2
  Downloaded rustc-demangle v0.1.25
  Downloaded addr2line v0.25.0
  Downloaded adler2 v2.0.1
  Downloaded gimli v0.32.0
  Downloaded object v0.37.1
  Downloaded 8 crates (791.2KiB) in 0.28s
   Compiling proc-macro2 v1.0.95
   Compiling unicode-ident v1.0.18
   Compiling compiler_builtins v0.1.160 (/home/vscode/.rustup/toolchains/nightly
-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/compiler-builtins/compile
r-builtins)
   Compiling version_check v0.9.5
   Compiling core v0.0.0 (/home/vscode/.rustup/toolchains/nightly-x86_64-unknown
-linux-gnu/lib/rustlib/src/rust/library/core)
   Compiling rustversion v1.0.21
   Compiling aya-ebpf-cty v0.2.2
   Compiling aya-ebpf-bindings v0.1.1
   Compiling proc-macro-error-attr v1.0.4
   Compiling proc-macro-error v1.0.4
   Compiling quote v1.0.40
   Compiling syn v2.0.104
   Compiling aya-ebpf v0.1.1
   Compiling num_enum_derive v0.7.3
   Compiling aya-ebpf-macros v0.1.1
   Compiling num_enum v0.7.3
   Compiling aya-log-common v0.1.15
   Compiling aya-log-parser v0.1.13
   Compiling aya-log-ebpf-macros v0.1.0
   Compiling alloc v0.0.0 (/home/vscode/.rustup/toolchains/nightly-x86_64-unknow
n-linux-gnu/lib/rustlib/src/rust/library/alloc)
   Compiling lock-common v0.1.0 (/workspace/kernel/aya/lock-common)
   Compiling aya-log-ebpf v0.1.1
   Compiling lock-ebpf v0.1.0 (/workspace/kernel/aya/lock-ebpf)
warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:41:9
   |
41 |         EVENTS.output(&ctx, &event, 0);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives
   = note: `#[warn(static_mut_refs)]` on by default

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:43:23
   |
43 |         let counter = BLOCKED_SYSCALLS.get_ptr_mut(&42).ok_or(0u32)?;
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to
 mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:72:9
   |
72 |         EVENTS.output(&ctx, &event, 0);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:74:23
   |
74 |         let counter = BLOCKED_SYSCALLS.get_ptr_mut(&56).ok_or(0u32)?;
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to
 mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

warning: `lock-ebpf` (bin "lock") generated 4 warnings
    Finished `release` profile [optimized] target(s) in 41.59s
Error: No such file or directory (os error 2)
xtask failed, attempting to build directly...
warning: profiles for the non root package will be ignored, specify profiles at
the workspace root:
package:   /workspace/kernel/aya/lock-ebpf/Cargo.toml
workspace: /workspace/kernel/aya/Cargo.toml
   Compiling lock-common v0.1.0 (/workspace/kernel/aya/lock-common)
   Compiling aya-ebpf-cty v0.2.2
   Compiling aya-ebpf-bindings v0.1.1
   Compiling proc-macro-error-attr v1.0.4
   Compiling rustversion v1.0.21
   Compiling proc-macro-error v1.0.4
   Compiling num_enum v0.7.3
   Compiling aya-log-common v0.1.15
   Compiling aya-ebpf v0.1.1
   Compiling aya-ebpf-macros v0.1.1
   Compiling aya-log-ebpf v0.1.1
   Compiling lock-ebpf v0.1.0 (/workspace/kernel/aya/lock-ebpf)
warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:41:9
   |
41 |         EVENTS.output(&ctx, &event, 0);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives
   = note: `#[warn(static_mut_refs)]` on by default

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:43:23
   |
43 |         let counter = BLOCKED_SYSCALLS.get_ptr_mut(&42).ok_or(0u32)?;
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to
 mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:72:9
   |
72 |         EVENTS.output(&ctx, &event, 0);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

warning: creating a shared reference to mutable static
  --> lock-ebpf/src/main.rs:74:23
   |
74 |         let counter = BLOCKED_SYSCALLS.get_ptr_mut(&56).ok_or(0u32)?;
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ shared reference to
 mutable static
   |
   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-
guide/rust-2024/static-mut-references.html>
   = note: shared references to mutable statics are dangerous; it's undefined be
havior if the static is mutated or if a mutable reference is created for it whil
e the shared reference lives

error: linking with `cc` failed: exit status: 1
  |
  = note:  "cc" "-m64" "/tmp/rustcTcd4rV/symbols.o" "<1 object files omitted>" "
-Wl,--as-needed" "-Wl,-Bstatic" "<sysroot>/lib/rustlib/x86_64-unknown-linux-gnu/
lib/{libcompiler_builtins-*}.rlib" "-L" "/tmp/rustcTcd4rV/raw-dylibs" "-Wl,-Bdyn
amic" "-B<sysroot>/lib/rustlib/x86_64-unknown-linux-gnu/bin/gcc-ld" "-fuse-ld=ll
d" "-Wl,-znostart-stop-gc" "-Wl,--eh-frame-hdr" "-Wl,-z,noexecstack" "-L" "<sysr
oot>/lib/rustlib/x86_64-unknown-linux-gnu/lib" "-o" "/workspace/kernel/aya/targe
t/x86_64-unknown-linux-gnu/release/deps/lock-da373742031abed1" "-Wl,--gc-section
s" "-pie" "-Wl,-z,relro,-z,now" "-Wl,-O1" "-nodefaultlibs"
  = note: some arguments are omitted. use `--verbose` to show all linker argumen
ts
  = note: rust-lld: error: undefined symbol: main
          >>> referenced by /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-lin
ux-gnu/Scrt1.o:(_start)

          rust-lld: error: undefined symbol: __libc_start_main
          >>> referenced by /usr/lib/gcc/x86_64-linux-gnu/11/../../../x86_64-lin
ux-gnu/Scrt1.o:(_start)
          collect2: error: ld returned 1 exit status


warning: `lock-ebpf` (bin "lock") generated 4 warnings
error: could not compile `lock-ebpf` (bin "lock") due to 1 previous error; 4 war
nings emitted

What's next:
    Try Docker Debug for seamless, persistent debugging tools in any container o
r image â†’ docker debug 171cb7ae1b6ac54fe66d3cae5cc0c8d08188bdb32b6f70c4e6c333bdc
fd0bc13
    Learn more at https://docs.docker.com/go/debug-cli/
[956311 ms] postCreateCommand failed with exit code 101. Skipping any further user-provided commands.
Done. Press any key to close the terminal.